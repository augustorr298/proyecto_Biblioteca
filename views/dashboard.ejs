<%- include('Parcial/header') %>

<div class="hero">
  <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 15px;">
    <% if (usuario.fotoPerfil) { %>
      <img src="<%= usuario.fotoPerfil %>" alt="Foto de <%= usuario.username %>" 
           style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 3px solid #4f46e5; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
    <% } else { %>
      <div style="width: 80px; height: 80px; border-radius: 8px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; color: #888; border: 2px dashed #ccc; text-align: center; padding: 5px;">
        (sin foto de perfil)
      </div>
    <% } %>
    <div>
      <h2 style="margin: 0;">Bienvenido, <%= usuario.username %>!</h2>
      <span class="badge <%= usuario.role === 'administrador' ? 'disponible' : 'prestado' %>">
        <%= usuario.role === 'administrador' ? 'Administrador' : 'Usuario' %>
      </span>
    </div>
  </div>
  <p>
    <% if (usuario.role === 'administrador') { %>
      Panel de Administraci√≥n - Gestiona libros, pr√©stamos y usuarios
    <% } else { %>
      Explora nuestro cat√°logo de libros y revisa tus pr√©stamos
    <% } %>
  </p>
  
  <div class="opciones">
    <div class="card">
      <h3>üìñ Libros</h3>
      <p>
        <% if (usuario.role === 'administrador') { %>
          Administra el cat√°logo de libros
        <% } else { %>
          Explora los libros disponibles
        <% } %>
      </p>
      <a href="/libros" class="btn">Ver Libros</a>
      <% if (usuario.role === 'administrador') { %>
        <a href="/libros/nuevo" class="btn btn-secondary">Agregar Libro</a>
      <% } %>
    </div>
    
    <div class="card">
      <h3>üìã Pr√©stamos</h3>
      <p>
        <% if (usuario.role === 'administrador') { %>
          Gestiona todos los pr√©stamos
        <% } else { %>
          Revisa tus pr√©stamos activos
        <% } %>
      </p>
      <a href="/prestamos" class="btn">
        <% if (usuario.role === 'administrador') { %>
          Ver Pr√©stamos
        <% } else { %>
          Mis Pr√©stamos
        <% } %>
      </a>
      <% if (usuario.role === 'administrador') { %>
        <a href="/prestamos/nuevo" class="btn btn-secondary">Nuevo Pr√©stamo</a>
      <% } %>
    </div>

    <% if (usuario.role === 'administrador') { %>
    <div class="card" style="border: 2px solid #dc2626;">
      <h3>‚öôÔ∏è Administraci√≥n</h3>
      <p style="color: #dc2626; font-weight: bold;">Panel Exclusivo</p>
      <a href="/admin/usuarios" class="btn">Usuarios</a>
      <a href="/admin/reportes" class="btn btn-secondary">Reportes</a>
      <a href="/admin/configuracion" class="btn btn-secondary">Configuraci√≥n</a>
    </div>
    <% } %>
  </div>
</div>

<div class="card" style="margin-top: 20px; text-align: center;">
  <a href="/logout" class="btn btn-danger">Cerrar Sesi√≥n</a>
</div>

<%- include('Parcial/footer') %>