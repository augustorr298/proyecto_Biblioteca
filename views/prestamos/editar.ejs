<%- include('../Parcial/header') %>

<div class="page-header">
  <h2>✏️ Editar Préstamo</h2>
</div>

<div class="form-contenedor">
  <form action="/prestamos/<%= prestamo._id %>?_method=PUT" method="POST">
    <div class="form-group">
      <label>Libro:</label>
      <select name="libroId" required>
        <% libros.forEach(libro => { %>
          <option value="<%= libro._id %>" <%= prestamo.libroId._id.equals(libro._id) ? 'selected' : '' %>>
            <%= libro.titulo %> - <%= libro.autor %>
          </option>
        <% }); %>
      </select>
    </div>

    <div class="form-group">
      <label>Nombre del Usuario:</label>
      <input type="text" name="nombreUsuario" value="<%= prestamo.nombreUsuario %>" required>
    </div>

    <div class="form-group">
      <label>Fecha de Devolución:</label>
      <input type="date" name="fechaDevolucion" value="<%= prestamo.fechaDevolucion.toISOString().split('T')[0] %>" required>
    </div>

    <div class="form-group">
      <label>
        <input type="checkbox" name="devuelto" value="true" <%= prestamo.devuelto ? 'checked' : '' %>>
        ¿Ya fue devuelto?
      </label>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn">Guardar Cambios</button>
      <a href="/prestamos" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>

<%- include('../Parcial/footer') %>