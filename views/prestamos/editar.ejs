<%- include('../Parcial/header') %>

<div class="page-header">
  <h2>Editar Préstamo</h2>
</div>

<div class="form-contenedor">
  <form action="/prestamos/<%= prestamo._id %>?_method=PUT" method="POST">
    
    <div class="card" style="background: #f8f9fa; padding: 15px; margin-bottom: 15px;">
      <p><strong>Libro:</strong> <%= prestamo.libroId ? prestamo.libroId.titulo : 'Libro no disponible' %></p>
      <p><strong>Usuario:</strong> <%= prestamo.nombreUsuario %></p>
      <p><strong>Fecha de Préstamo:</strong> <%= new Date(prestamo.fechaPrestamo).toLocaleDateString('es-MX') %></p>
    </div>

    <div class="form-group">
      <label>Fecha de Devolución:</label>
      <input type="date" name="fechaDevolucion" value="<%= prestamo.fechaDevolucion.toISOString().split('T')[0] %>" required>
    </div>

    <div class="form-group">
      <label class="checkbox-label">
        <input type="checkbox" name="devuelto" value="true" <%= prestamo.devuelto ? 'checked' : '' %>>
        ✅ ¿Ya fue devuelto?
      </label>
      <% if (prestamo.devuelto && prestamo.fechaDevolucionReal) { %>
        <small>Devuelto el: <%= new Date(prestamo.fechaDevolucionReal).toLocaleDateString('es-MX') %></small>
      <% } %>
    </div>



    <div class="form-actions">
      <button type="submit" class="btn">Guardar Cambios</button>
      <a href="/prestamos" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>

<%- include('../Parcial/footer') %>